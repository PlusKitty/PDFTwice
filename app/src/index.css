@tailwind base;
@tailwind components;
@tailwind utilities;

/**
 * Z-Index Utility Classes
 * Centralized z-index system to prevent layering conflicts.
 */
@layer utilities {
    .z-annotation-base {
        z-index: 20;
    }

    .z-annotation-point {
        z-index: 30;
    }

    .z-search-panel {
        z-index: 50;
    }

    .z-annotation-tooltip {
        z-index: 60;
    }

    .z-active-comment-shield {
        z-index: 70;
    }

    .z-active-comment-box {
        z-index: 80;
    }
}

/**
 * Selection Flicker Fix (PDF.js endOfContent approach)
 * Appends a special element at the end of text layer to prevent selection jumping.
 */
.textLayer .endOfContent {
    display: block;
    position: absolute;
    inset: 100% 0 0;
    z-index: 0;
    cursor: default;
    user-select: none;
}

.textLayer .endOfContent::before {
    content: "";
    display: block;
    position: absolute;
    inset: 0;
    z-index: -1;
}

/* During selection, expand endOfContent to cover entire text layer */
.textLayer.selecting .endOfContent {
    top: 0;
}

/**
 * Annotation Layer Interactivity Fix
 * Ensures links are clickable (z-index + pointer-events: auto)
 * while allowing text selection to pass through empty areas (pointer-events: none).
 */
.annotationLayer {
    /* z-index: 10 !important; Removed to prevent Z-axis issues with comment box */
    pointer-events: none;
}

.annotationLayer>* {
    pointer-events: auto;
}

/* Ensure link elements specifically are clickable */
/* Ensure link elements specifically are clickable and fill the area */


/* Remove default yellow/highlight hover effect from ALL PDF links (explicit and inferred) */
.annotationLayer a:hover,
.annotationLayer a:focus,
.annotationLayer .linkAnnotation:hover,
.annotationLayer .linkAnnotation>a:hover,
.annotationLayer .linkAnnotation>a:focus {
    background: transparent !important;
    outline: none !important;
    box-shadow: none !important;
}

/* Ensure ALL link elements are clickable and fill the area */
.annotationLayer a,
.annotationLayer .linkAnnotation>a,
.annotationLayer .buttonWidgetAnnotation.pushButton>a {
    cursor: pointer;
    display: block;
    width: 100%;
    height: 100%;
}

/* Force dimensions to override potential invalid 'round()' css from pdf.js specific to this environment */
.annotationLayer,
.textLayer {
    width: 100% !important;
    height: 100% !important;
    left: 0 !important;
    top: 0 !important;
}


@keyframes border-blink {

    0%,
    100% {
        border-color: transparent;
        border-width: 1px;
    }

    50% {
        border-color: #f97316;
        border-width: 2px;
    }
}

.animate-border-blink {
    animation: border-blink 0.3s ease-in-out 2;
}

.image-alt-overlay {
    position: absolute;
    cursor: help;
    z-index: 25;
    /* Between text layer (0) and annotations-ish */
}

.alt-badge {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 10px;
    padding: 2px 4px;
    border-radius: 2px;
    pointer-events: none;
    transition: opacity 0.2s;
}

.image-alt-overlay:hover .alt-badge {
    opacity: 0;
}